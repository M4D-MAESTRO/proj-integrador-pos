<ion-content appScrollTheme>
  <ng-container>
    <form [formGroup]="form" (ngSubmit)="$event.preventDefault()">
      <div class="surface-ground px-4 py-8 md:px-6 lg:px-8">
        <div class="text-900 font-medium text-xl mb-3">Criar/Cadastrar</div>
        <div class="surface-card p-4 shadow-2 border-round p-fluid">
          <div class="grid formgrid p-fluid">
            <div class="field mb-4 col-12 md:col-6">
              <label for="nome" class="font-medium text-900">Nome</label>
              <input id="nome" type="text" pInputText formControlName="nome">
              <div class="flex mt-1 justify-content-end">
                <p-message severity="error" text="Obrigatório" *ngIf="isInputError('nome')"></p-message>
              </div>
            </div>
            <div class="field mb-4 col-12">
              <label for="descricao" class="font-medium text-900">Descrição</label>
              <textarea class="h-auto" id="descricao" pInputTextarea [autoResize]="true" [rows]="5"
                formControlName="descricao"></textarea>
              <div class="flex mt-1 justify-content-end">
                <p-message severity="error" text="Obrigatório" *ngIf="isInputError('descricao')"></p-message>
              </div>
            </div>
            <div class="field mb-4 col-12 md:col-6">
              <label for="valor_mensal" class="font-medium text-900">Valor mensal</label>
              <p-inputNumber id="valor_mensal" formControlName="valor_mensal" mode="decimal" [minFractionDigits]="2"
                [maxFractionDigits]="2" (onInput)="generateSuggestionValue($event)"></p-inputNumber>
              <div class="flex mt-1 justify-content-end">
                <p-message severity="error" text="Obrigatório" *ngIf="isInputError('valor_mensal')"></p-message>
              </div>
            </div>
            <div class="field mb-4 col-12 md:col-6">
              <label for="valor_trimestral" class="font-medium text-900">Valor trimestral <span
                  class="text-xs">(opcional)</span></label>
              <p-inputNumber id="valor_trimestral" formControlName="valor_trimestral" mode="decimal"
                [minFractionDigits]="2" [maxFractionDigits]="2"
                [placeholder]="'Valor sugerido: R$ ' + suggestionedValues.valor_trimestral.toFixed(2)"></p-inputNumber>
            </div>

            <div class="field mb-4 col-12 md:col-6">
              <label for="valor_semestral" class="font-medium text-900">Valor semestral <span
                  class="text-xs">(opcional)</span></label>
              <p-inputNumber id="valor_semestral" formControlName="valor_semestral" mode="decimal"
                [minFractionDigits]="2" [maxFractionDigits]="2"
                [placeholder]="'Valor sugerido: R$ ' + suggestionedValues.valor_semestral.toFixed(2)"></p-inputNumber>
            </div>
            <div class="field mb-4 col-12 md:col-6">
              <label for="valor_semestral" class="font-medium text-900">Valor anual <span
                  class="text-xs">(opcional)</span></label>
              <p-inputNumber id="valor_anual" formControlName="valor_anual" mode="decimal" [minFractionDigits]="2"
                [maxFractionDigits]="2"
                [placeholder]="'Valor sugerido: R$ ' + suggestionedValues.valor_anual.toFixed(2)"></p-inputNumber>
            </div>
            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>

            <div class="field mb-4 col-12 ">
              <app-itens-de-plano-selection
                (selectedItensEvent)="getSelectedItens($event)"></app-itens-de-plano-selection>
            </div>
            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>

            <div class="field mb-4 col-12 ">
              <label for="custo_mensal" class="font-medium text-900">Custo mensal <span
                  class="text-xs">(opcional)</span></label>
              <p-inputNumber id="custo_mensal" formControlName="custo_mensal" mode="decimal" [minFractionDigits]="2"
                [maxFractionDigits]="2"
                [placeholder]="'Custo estimado: R$ ' + suggestionedValues.custo_mensal.toFixed(2)"></p-inputNumber>
            </div>
            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>
          </div>
          <div class="flex justify-content-end">
            <button pButton pRipple label="Criar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="create()"
              [disabled]="disableCreateBtn()"></button>
          </div>
        </div>
      </div>
    </form>
  </ng-container>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>
  </ion-toolbar>
</ion-footer>